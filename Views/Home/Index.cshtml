@using TechTales.Helpers;
@model HomeViewModel;
@{
    ViewData["Title"] = "Home";
}

<link rel="stylesheet" href="~/css/home/home.css" />

<div class="text-center">
    <img class="outline-border rounded-image" src="~/images/logo.svg" alt="logo" />
    <h1 class="py-2 text-darkblue">TechTales - Find your favourite blog!</h1>
    <div class="input-block outline-border">
        <input class="text-black" placeholder="Title, Category, Tag, Content..." type="text" required />
        <button class="px-4 py-2 outline-box-shadow btn outline-border">Search</button>
    </div>
    <div class="d-flex justify-content-between my-4 blogs-sidepanel-container">
        <div class="flex-grow-1">
            <ol id="blogs-list">
                @foreach (var blog in Model.Blogs)
                {
                    <li class="mb-3 px-4 py-3 blog-container outline-border">
                        <div class="d-flex justify-content-between">
                            <div class="blog-title-content pe-4">
                                <h3 class="text-darkblue fw-bold text-break ws-pl">@blog.Title</h3>
                                <p class="text-darkblue text-break ws-pl"><!--
                                    -->@blog.Content.EllipsisString(230) <!--
                                    --><a class="text-blueviolet" asp-action="Read" asp-controller="Blog" asp-route-id="@blog.Id">[Read more]</a>
                                </p>
                            </div>
                            <div class="blog-time-user">
                                <p class="text-darkblue">@blog.CreationDate.ToString("dd/MM/yyyy")</p>
                                <a asp-action="Detail" asp-controller="Profile"
                                asp-route-id="@blog.Author.Id"
                                class="d-flex flex-column align-items-center">
                                    <img class="rounded-image size-64-fit-cover outline-box-shadow" src="@blog.Author.Avatar" />
                                    <p class="text-blueviolet">@blog.Author.UserName</p>
                                </a>
                            </div>
                        </div>
                        <div class="text-darkblue d-flex">Views: @blog.Views</div>
                    </li>
                }
            </ol>
            <ul class="blog-pagination d-inline-block p-0 mt-3">
                
                <li><a asp-action="Index"
                        style="@(Model.CurrentPage <= 1 ? "pointer-events: none;color: #6c757d;" : "color: blueviolet;")"
                        asp-route-page="@(Model.CurrentPage - 1)"
                        asp-fragment="blogs-list">«</a></li>
                
                @for (int i = 0; i < Model.TotalPages; i++)
                {
                    int inc = i + 1;
                    if (Model.CurrentPage == inc)
                    {
                        <li><a class="active-pagination"
                               asp-action="Index"
                               asp-fragment="blogs-list"
                               asp-route-page="@inc">@inc</a></li>
                    }
                    else
                    {
                        <li><a asp-action="Index"
                               asp-route-page="@inc"
                               asp-fragment="blogs-list">@inc</a></li>
                    }
                }

                <li><a asp-action="Index"
                        style="@(Model.CurrentPage >= Model.TotalPages ? "pointer-events: none;color: #6c757d;" : "color: blueviolet;")"
                        asp-route-page="@(Model.CurrentPage + 1)"
                        asp-fragment="blogs-list">»</a></li>
                
            </ul>
        </div>
        <div class="sidepanel ms-4 outline-border">
            <ul class="py-3 px-4 text-start">
                <li class="mb-3">
                    <a class="text-blueviolet" href="">Popular blogs</a>
                </li>
                <li class="mb-3">
                    <a class="text-blueviolet" href="">Categories</a>
                </li>
                <li class="mb-3">
                    <a class="text-blueviolet" href="">Tags</a>
                </li>
            </ul>
        </div>
    </div>
</div>

<script src="~/js/home/index.js"></script>